<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Reppam Integration Test</title>
		<meta name="description" content="">
		<meta name="viewport" content="width = device-width, initial-scale = 1.0, minimum-scale = 1.0, maximum-scale = 1.0, minimal-ui"/>
		<link href='http://fonts.googleapis.com/css?family=Roboto:400,100,400italic,700' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="css/main.css">
	</head>
	<body>
		<div id="grid-container" class="hidden"><div></div></div>
		<main class="main-cont">
			<section>
				<h1>Reppam Mapper</h1>
				<p class="ingress">A mapping function for integration with Google Maps API. To be able to use the API key the domain needs to be whitelisted. Please create a new key if you're not a member of the Young Skilled team</p>
			</section>
			<section>
				<h3>Default</h3>
				<p>Standard map.</p>
				<pre>
$('.reppam').reppam({
	debug: true,
	countriesUrl: '../json/countries.json',
	markersUrl: '../json/sample.json',
	defaultCountry: 'NO',
	mapOptions: {
		backgroundColor: '#FFFBF3',
		styles: [{
			"elementType": "geometry",
			"stylers": [{"invert_lightness": true}, {"saturation": -100}, {"lightness": 31}]
		}, {
			"featureType": "water",
			"elementType": "geometry",
			"stylers": [{"lightness": 56}]
		}, {
			"featureType": "water",
			"elementType": "labels",
			"stylers": [{"lightness": -42}]
		}]
	},
	multipleMarker: {
		url: '../images/map-icon-multiple.png',
		size: [46, 62],
		anchor: [23, 62],
		textColor: 'transparent'
	},
	singleMarker: {
		url: '../images/map-icon-single.png',
		size: [46, 62],
	},
	personMarker: {
		url: '../images/map-icon-person.png',
		size: [46, 62],
	},
	strokeColor: '#FF7580',
	useTitleInInfoWindow: true
});
				</pre>
				<a href="#" id="locate-me" class="btn">Get my location</a>
				<a href="#" id="nearest" class="btn">Find Nearest Store</a>
				<a href="#" class="coords btn" data-coords='{"lat":30,"lng":20,"zoom":5}'>Destination 1</a>
				<a href="#" class="coords btn" data-coords='{"lat":50,"lng":60,"zoom":13}'>Destination 2</a>
				<a href="#" class="js-remove-markers btn">Remove Markers</a>
				<a href="#" class="js-replace-markers btn">Replace Markers</a>
				<div class="reppam"></div>
				<h3>Example store list</h3>
				<ul class="inline-list">
					<li id="582">
						<h4>Norwegian Outlet Vestby</h4>
						<p>
							Vestbyveien 155, Vestby<br />
							Ph: +47 40 00 36 40<br />
							<a href="mailto:vestby@moodsofnorway.com">vestby&#64;moodsofnorway.com</a>
						</p>
						<p><strong>Åpningstider:</strong><br />
							Mon-Fri: 10:00-20:00<br />
							Thur: 10:00-21:00<br />
							Sat: 10:00-18:00
						</p>
						<a href="#" class="show-on-map btn">Show on map</a>
					</li><li id="617">
						<h4>Moule - Canada</h4>
						<p>
							2321 S. Granville St.<br />
							Vancouver BC V3E 3H5<br />
							604-732-4066<br />
							Canada
						</p>
						<a href="#" class="show-on-map btn">Show on map</a>
					</li><li id="571">
						<h4>W Hotels - Hollywood</h4>
						<p>
							6250 Hollywood Blvd.<br />
							Hollywood, CA 90028<br />
							212-941-6300<br />
							USA
						</p>
						<a href="#" class="show-on-map btn">Show on map</a>
					</li>
				</ul>
			</section>
			<section>
				<h3>Simple Map</h3>
				<p>Useful if all data doesn't need to be passed via AJAX</p>
				<pre>
$('.js-reppam--simple').reppam({
	debug: true,
	startPosition: [59.3194003,18.0292759,15],
	useMarkerClusterer: false,
	mapData: {
		"locations": {
	    "1": {
	      "name": "Test store",
	      "latitude": "59.3194003",
	      "longitude": "18.0292759",
	      "address": "&#x3C;p&#x3E;Somewhere&#x3C;br \/&#x3E;Somehow&#x3C;br \/&#x3E;Ph: somenumber&#x3C;br \/&#x3E;\nMon-Fri: 10:00-17:00&#x3C;br \/&#x3E;\nSat: 10:00-16:00&#x3C;\/p&#x3E;\n",
	    }
	  }
	},
	mapOptions: {
		backgroundColor: '#FFFBF3',
		scrollwheel: false,
		styles: [{
			"elementType": "geometry",
			"stylers": [{"invert_lightness": true}, {"saturation": -100}, {"lightness": 31}]
		}, {
			"featureType": "water",
			"elementType": "geometry",
			"stylers": [{"lightness": 56}]
		}, {
			"featureType": "water",
			"elementType": "labels",
			"stylers": [{"lightness": -42}]
		}]
	},
	singleMarker: {
		url: '../images/map-icon-single.png',
		size: [46, 62],
	}
});
				</pre>
				<div class="js-reppam--simple"></div>
			</section>
		</main>
		<footer class="main-cont">
			<a class="signature" href="http://youngskilled.com">
				<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="81px" height="75px" viewBox="-47.5 655 81 75" enable-background="new -47.5 655 81 75" xml:space="preserve">
					<g>
						<path d="M-22.799,656.598c2.21,0,3.738,0.264,3.738,2.211c0,0.689-0.313,1.633-1.104,3.263l-6.955,14.059l-5.581-12.479
							c-1.848-4.103-2.001-4.526-2.001-5.051c0-1.271,0.844-2.003,2.739-2.003h1.418v-1.583H-47.5v1.583
							c3.211,0.104,4.424,0.572,5.902,3.785l8.632,18.598v7.691c0,2.943-0.949,4.209-4.372,4.26v1.582h15.381v-1.582
							c-3.422-0.053-4.367-1.317-4.367-4.26v-7.691l10.637-19.696c0.945-1.743,2.315-2.687,4.58-2.687v-1.583h-11.692V656.598z"/>
						<path d="M13.96,698.713c0-2.838,2.531-5.581,6.798-5.581c5.58,0,9.053,3.317,9.642,8.692h1.619l0.005-9.324
							c-2.946-1.055-6.894-1.366-9.74-1.366c-11.745,0-13.269,8.271-13.269,10.954c0,11.689,19.223,11.272,19.223,19.697
							c0,2.9-2.529,6.217-7.692,6.217c-3.63,0-8.799-2.742-10.063-8.849H8.848l0.004,9.111c3.737,1.048,8.112,1.733,11.482,1.733
							c8.743,0,13.166-4.948,13.166-11.167C33.5,707.091,13.96,706.399,13.96,698.713"/>
						<polygon points="10.945,655 7.911,655 -23.157,730 -20.125,730 	"/>
					</g>
				</svg>
			</a>
		</footer>
		<script type="text/javascript" src="/js/jquery.js"></script>
		<script type="text/javascript" src="//maps.google.com/maps/api/js"></script>
		<script type="text/javascript" src="/js/markerclusterer.js"></script>
		<script type="text/javascript" src="/js/reppam.js"></script>
		<script>
			$(document).ready(function() {
				var gridShowing;


				//Styles can be set here:
				$('.reppam').reppam({
					debug: true,
					mapData: '../json/sample.json',
					defaultCountry: 'NO',
					mapOptions: {
						backgroundColor: '#FFFBF3',
						styles: [{
							"elementType": "geometry",
							"stylers": [{"invert_lightness": true}, {"saturation": -100}, {"lightness": 31}]
						}, {
							"featureType": "water",
							"elementType": "geometry",
							"stylers": [{"lightness": 56}]
						}, {
							"featureType": "water",
							"elementType": "labels",
							"stylers": [{"lightness": -42}]
						}]
					},
					multipleMarker: {
						url: '../images/map-icon-multiple.png',
						size: [46, 62],
						anchor: [23, 62],
						textColor: 'transparent'
					},
					singleMarker: {
						url: '../images/map-icon-single.png',
						size: [46, 62],
					},
					personMarker: {
						url: '../images/map-icon-person.png',
						size: [46, 62],
					},
					strokeColor: '#FF7580',
					useTitleInInfoWindow: true
				});

				$('.js-remove-markers').on('click', function(e){
					e.preventDefault();
					$('.reppam').reppam('removeAllMarkers');
				});

				$('.js-replace-markers').on('click', function(e){
					e.preventDefault();

					var pickup_points_center = {
						zoom: 15,
						lat: 59.316555,
						lng: 18.054471
					}
					var pickup_points = {
						locations: {
							1: {
								name: 'PostNord Stockholm Rosenlundsg',
								address: 'PostNord Stockholm Rosenlundsg<br>Rosenlundsgatan 9<br>118 53, Stockholm',
								latitude: 59.3166455,
								longitude: 18.0539243
							},
							2: {
								name: 'Saras Tobak',
								address: 'Saras Tobak<br>Rosenlundsgatan 7<br>118 53, Stockholm',
								latitude: 59.3167148,
								longitude: 18.0537986
							},
							3: {
								name: 'Coop Zinken',
								address: 'Coop Zinken<br>Hornsgatan 102<br>118 21, Stockholm',
								latitude: 59.3175591,
								longitude: 18.0487533
							},
							4: {
								name: 'Hemköp Mariahallen',
								address: 'Hemköp Mariahallen<br>Hornsgatan 74<br>118 21, Stockholm',
								latitude: 59.3175734,
								longitude: 18.0601383
							},
							5: {
								name: 'Coop Mariatorget',
								address: 'Coop Mariatorget<br>Hornsgatan 54<br>118 21, Stockholm',
								latitude: 59.3189754,
								longitude: 18.0601383
							}
						}
					}

					$('.reppam').reppam('replaceAllMarkers', {
						mapData: pickup_points,
						startPosition: pickup_points_center
					});
				});

				$('.show-on-map').on('click', function(e){
					e.preventDefault();

					var $this = $(this),
						parentId = $(this).parent().attr('id');

					$('.reppam').reppam('showOnMap', {
						id: parentId,
						callback: function(success) {
							if(!success) {
								$this.addClass('error');
								$this.after('<p class="error">' + err.msg + '</p>');
							}
						}
					});
				});

				var callbackReturn = function(success) {
					console.log('var success', success);
				}

				$('.coords').on('click', function(e) {
					e.preventDefault();

					var $this = $(this)
						data = $this.data('coords');

					data.callback = callbackReturn;
					$('.reppam').reppam('showCoords', data);

				});


				$('.js-reppam--simple').reppam({
					debug: true,
					startPosition: {
						lat: 59.3194003,
						lng: 18.0292759,
						zoom: 15
					},
					useMarkerClusterer: false,
					mapData: {
						"locations": {
					    "1": {
					      "name": "Test store",
					      "latitude": "59.3194003",
					      "longitude": "18.0292759",
					      "address": "<p>Somewhere<br \/>Somehow<br \/>Ph: somenumber<br \/>\nMon-Fri: 10:00-17:00<br \/>\nSat: 10:00-16:00<\/p>\n",
					    }
					  }
					},
					mapOptions: {
						backgroundColor: '#FFFBF3',
						scrollwheel: false,
						styles: [{
							"elementType": "geometry",
							"stylers": [{"invert_lightness": true}, {"saturation": -100}, {"lightness": 31}]
						}, {
							"featureType": "water",
							"elementType": "geometry",
							"stylers": [{"lightness": 56}]
						}, {
							"featureType": "water",
							"elementType": "labels",
							"stylers": [{"lightness": -42}]
						}]
					},
					singleMarker: {
						url: '../images/map-icon-single.png',
						size: [46, 62],
					}
				});


				//Hide/display grid
				$(window).on('keypress', function(e){
					if(e.shiftKey && e.ctrlKey && (e.charCode === 1 || e.charCode === 65)) {
						$('#grid-container').toggleClass('hidden');
						gridShowing = true;
					}
					if(gridShowing && e.charCode === 0) {
						$('#grid-container').addClass('hidden');
						gridShowing = false;
					}
				});
			});
		</script>
	</body>
</html>